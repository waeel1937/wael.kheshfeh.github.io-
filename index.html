<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Meine Persönliche Webseite</title>
  <!-- Bootstrap 5 CSS für responsives Layout -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css">
  <!-- AOS CSS (Animate on Scroll Library für Scroll-Animationen) -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
  <!-- Google Font (für modernes Schriftbild, optional) -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap">
  <style>
    /* Eigene CSS-Styles für moderne Gestaltung und Effekte */
    body {
      font-family: 'Open Sans', sans-serif;
    }
    header.hero {
      background: linear-gradient(135deg, #0066ff, #00d4ff); /* moderner Farbverlauf als Hintergrund */
      color: #fff;
    }
    header.hero .lead {
      font-size: 1.25rem;
    }
    /* Weicher Hover-Effekt auf Navigationslinks */
    .navbar-nav .nav-link {
      transition: color 0.3s;
    }
    .navbar-nav .nav-link:hover {
      color: #00d4ff; /* Farbwechsel beim Hover (Akzentfarbe) */
    }
    /* Hover-Effekt auf Karten (leichter Schatten und Anheben) */
    .card {
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }
    /* Canvas-Elemente für Chart.js Diagramme responsiv machen */
    canvas {
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
<body>
  <!-- Navigationsleiste (Navbar) -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#home">Meine Webseite</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu" aria-controls="navMenu" aria-expanded="false" aria-label="Navigation umschalten">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link active" href="#home">Start</a></li>
          <li class="nav-item"><a class="nav-link" href="#analytics">Analyse</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact">Kontakt</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero-Bereich mit Begrüßungstext -->
  <header id="home" class="hero py-5 text-center" data-aos="fade-up">
    <div class="container">
      <h1 class="display-4">Willkommen auf meiner Webseite</h1>
      <p class="lead">Dies ist eine modernisierte persönliche Webseite mit neuen Funktionen und Design.</p>
    </div>
  </header>

  <!-- Analyse-Bereich mit Live-Daten und Statistiken -->
  <section id="analytics" class="py-5">
    <div class="container">
      <h2 class="mb-4 text-center" data-aos="fade-up">Live Analyse &amp; Statistiken</h2>
      <!-- Statistiken (Besucher, IP, Browser/OS, Ladezeit) als Karten -->
      <div class="row text-center" data-aos="fade-up">
        <div class="col-md-3 col-sm-6 mb-3">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title">Aktive Besucher</h5>
              <p id="visitorCount" class="card-text display-6">-</p>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title">Ihre IP</h5>
              <p id="ipAddress" class="card-text">Lade...</p>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title">Browser / OS</h5>
              <p id="userDevice" class="card-text">-</p>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title">Ladezeit</h5>
              <p class="card-text"><span id="loadTime">-</span> Sek.</p>
            </div>
          </div>
        </div>
      </div>
      <!-- Diagramme mit Chart.js (Geräteverteilung und Browsernutzung) -->
      <div class="row mt-5" data-aos="fade-up">
        <div class="col-md-6 mb-4">
          <h5 class="text-center">Geräteverteilung</h5>
          <canvas id="deviceChart" width="400" height="400"></canvas>
        </div>
        <div class="col-md-6 mb-4">
          <h5 class="text-center">Browsernutzung</h5>
          <canvas id="browserChart" width="400" height="400"></canvas>
        </div>
      </div>
    </div>
  </section>

  <!-- Kontaktbereich mit einfachem Kontaktformular -->
  <section id="contact" class="py-5 bg-light">
    <div class="container">
      <h2 class="mb-4 text-center" data-aos="fade-up">Kontakt</h2>
      <div class="row justify-content-center">
        <div class="col-md-8">
          <!-- Einfaches Kontaktformular (für tatsächlichen Versand ist Server/Service-Anbindung nötig) -->
          <form data-aos="fade-up">
            <div class="mb-3">
              <label for="name" class="form-label">Name</label>
              <input type="text" class="form-control" id="name" placeholder="Ihr Name" required>
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">E-Mail</label>
              <input type="email" class="form-control" id="email" placeholder="Ihre E-Mail-Adresse" required>
            </div>
            <div class="mb-3">
              <label for="message" class="form-label">Nachricht</label>
              <textarea class="form-control" id="message" rows="4" placeholder="Ihre Nachricht..." required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Absenden</button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer mit Urheberrechtshinweis -->
  <footer class="py-3 bg-dark text-light text-center">
    <div class="container">
      <small>&copy; 2025 Meine Persönliche Webseite</small>
    </div>
  </footer>

  <!-- Einbindung der benötigten JS-Bibliotheken (Chart.js, Bootstrap, AOS) und eigenes Skript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    // Initialisierung von AOS (Scroll-Animationen)
    AOS.init();

    // Simulierte Live-Besucherzahl (Aktualisierung alle 5 Sekunden)
    const visitorElement = document.getElementById('visitorCount');
    function updateVisitorCount() {
      const randomCount = Math.floor(Math.random() * 5) + 1; // simuliert 1 bis 5 gleichzeitige Besucher
      visitorElement.textContent = randomCount;
    }
    updateVisitorCount();
    setInterval(updateVisitorCount, 5000);

    // Abfrage der IP-Adresse des Besuchers über eine öffentliche API (ipify)
    fetch('https://api.ipify.org?format=json')
      .then(response => response.json())
      .then(data => {
        document.getElementById('ipAddress').textContent = data.ip;
      })
      .catch(error => {
        console.error('Fehler beim Abrufen der IP:', error);
        document.getElementById('ipAddress').textContent = 'nicht verfügbar';
      });

    // Browser- und Betriebssystem-Erkennung aus dem User-Agent
    const ua = navigator.userAgent;
    let browser = 'Unbekannter Browser';
    if (ua.indexOf('Firefox') > -1) browser = 'Firefox';
    else if (ua.indexOf('Edg') > -1) browser = 'Edge';
    else if (ua.indexOf('OPR') > -1 || ua.indexOf('Opera') > -1) browser = 'Opera';
    else if (ua.indexOf('Chrome') > -1 && ua.indexOf('Safari') > -1) browser = 'Chrome';
    else if (ua.indexOf('Safari') > -1 && ua.indexOf('Chrome') === -1) browser = 'Safari';
    let os = 'Unbekanntes OS';
    if (ua.indexOf('Win') > -1) os = 'Windows';
    else if (ua.indexOf('Mac') > -1) os = 'macOS';
    else if (ua.indexOf('Android') > -1) os = 'Android';
    else if (ua.indexOf('like Mac') > -1) os = 'iOS';
    else if (ua.indexOf('Linux') > -1 && ua.indexOf('Android') === -1) os = 'Linux';
    document.getElementById('userDevice').textContent = browser + ' / ' + os;

    // Performance: Ladezeit der Seite ermitteln und anzeigen
    window.addEventListener('load', () => {
      const loadTime = performance.now(); // Zeit seit dem Start des Seitenladens in ms
      document.getElementById('loadTime').textContent = (loadTime / 1000).toFixed(2);
    });

    // Diagramme mit Chart.js erstellen
    const ctxDevice = document.getElementById('deviceChart').getContext('2d');
    const deviceChart = new Chart(ctxDevice, {
      type: 'doughnut',
      data: {
        labels: ['Desktop', 'Mobil', 'Tablet'],
        datasets: [{
          data: [60, 35, 5], // Beispiel-Daten in Prozent
          backgroundColor: ['#0d6efd', '#198754', '#ffc107'] // Farben der Segmente
        }]
      },
      options: {
        plugins: {
          legend: { display: true }
        }
      }
    });
    const ctxBrowser = document.getElementById('browserChart').getContext('2d');
    const browserChart = new Chart(ctxBrowser, {
      type: 'bar',
      data: {
        labels: ['Chrome', 'Firefox', 'Edge', 'Safari', 'Andere'],
        datasets: [{
          label: 'Anteil (%)',
          data: [50, 20, 15, 10, 5], // Beispiel-Daten in Prozent
          backgroundColor: '#0dcaf0'
        }]
      },
      options: {
        scales: {
          y: { beginAtZero: true, max: 100 }
        },
        plugins: {
          legend: { display: false }
        }
      }
    });
  </script>
</body>
</html>
